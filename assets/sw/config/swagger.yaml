definitions:
  rk.ProcessInfo:
    properties:
      cpuInfo:
        $ref: '#/definitions/rkos.CpuInfo'
      domain:
        example: dev
        type: string
      gid:
        example: "20"
        type: string
      goEnvInfo:
        $ref: '#/definitions/rkos.GoEnvInfo'
      memInfo:
        $ref: '#/definitions/rkos.MemInfo'
      netInfo:
        $ref: '#/definitions/rkos.NetInfo'
      osInfo:
        $ref: '#/definitions/rkos.OsInfo'
      serviceName:
        example: rk-app
        type: string
      serviceVersion:
        example: dev
        type: string
      startTime:
        example: "2022-03-15T20:43:05+08:00"
        type: string
      uid:
        example: "501"
        type: string
      upTime:
        example: 1h
        type: string
      username:
        example: lark
        type: string
    type: object
  rk.aliveResp:
    properties:
      alive:
        example: true
        type: boolean
    type: object
  rk.eventErrorResp:
    properties:
      error:
        type: string
    type: object
  rk.eventLevelResp:
    properties:
      level:
        type: string
    type: object
  rk.gcResp:
    properties:
      memStatAfterGc:
        $ref: '#/definitions/rkos.MemInfo'
      memStatBeforeGc:
        $ref: '#/definitions/rkos.MemInfo'
    type: object
  rk.readyResp:
    properties:
      ready:
        example: true
        type: boolean
    type: object
  rk.viperError:
    properties:
      error:
        type: string
    type: object
  rk.viperReq:
    properties:
      values:
        items:
          properties:
            key:
              type: string
            value: {}
          type: object
        type: array
    type: object
  rk.viperResp:
    additionalProperties: true
    type: object
  rk.zapErrorResp:
    properties:
      error:
        type: string
    type: object
  rk.zapLevelResp:
    properties:
      level:
        type: string
    type: object
  rkos.CpuInfo:
    properties:
      count:
        example: 8
        type: integer
    type: object
  rkos.GoEnvInfo:
    properties:
      goArch:
        example: amd64
        type: string
      goos:
        example: darwin
        type: string
      routinesCount:
        example: 9
        type: integer
      version:
        example: go1.17.6
        type: string
    type: object
  rkos.MemInfo:
    properties:
      forceGcCount:
        example: 0
        type: integer
      gcCountTotal:
        example: 1
        type: integer
      lastGcTimestamp:
        example: "2022-03-15T20:43:06+08:00"
        type: string
      memAllocByte:
        example: 4182336
        type: integer
      memUsedMb:
        example: 3
        type: integer
      memUsedPercentage:
        example: 0.21
        type: number
      sysAllocByte:
        example: 19876624
        type: integer
    type: object
  rkos.NetInfo:
    properties:
      netInterface:
        items:
          $ref: '#/definitions/rkos.netInterface'
        type: array
    type: object
  rkos.OsInfo:
    properties:
      arch:
        example: amd64
        type: string
      hostname:
        example: lark.local
        type: string
      os:
        example: darwin
        type: string
    type: object
  rkos.netInterface:
    properties:
      addrs:
        example:
        - 127.0.0.1/8
        items:
          type: string
        type: array
      flags:
        example:
        - up
        items:
          type: string
        type: array
      hardwareAddr:
        example: ""
        type: string
      mtu:
        example: 16384
        type: integer
      multicastAddrs:
        example:
        - ff02::fb
        items:
          type: string
        type: array
      name:
        example: lo0
        type: string
    type: object
info:
  contact:
    email: lark@pointgoal.io
    name: rk-dev
    url: https://github.com/rookie-ninja/rk-entry
  description: |+
    ## Description
    Builtin APIs supported via [rk-entry](https://github.com/rookie-ninja/rk-entry).

    ## APIs

    | Name   | Description                               |
    |--------|-------------------------------------------|
    | /alive | Designed for liveness prob of Kubernetes  |
    | /ready | Designed for readiness prob of Kubernetes |
    | /gc    | Trigger GC                                |
    | /info  | Returns application, process, OS info     |

  license:
    name: Apache 2.0 License
    url: https://github.com/rookie-ninja/rk-entry/blob/master/LICENSE.txt
  title: RK Common Service
  version: "1.0"
paths:
  /rk/v1/alive:
    get:
      operationId: "30002"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.aliveResp'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Get application liveness status
  /rk/v1/event/activate:
    post:
      operationId: "31000"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.eventLevelResp'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rk.eventErrorResp'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Activate event logger level
      tags:
      - event
  /rk/v1/event/deactivate:
    post:
      operationId: "31001"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.eventLevelResp'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rk.eventErrorResp'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Deactivate event logger level
      tags:
      - event
  /rk/v1/gc:
    get:
      operationId: "30003"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.gcResp'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Trigger Gc
  /rk/v1/info:
    get:
      operationId: "30004"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.ProcessInfo'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Get application and process info
  /rk/v1/ready:
    get:
      operationId: "30001"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.readyResp'
        "500":
          description: Internal Server Error
          schema: {}
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Get application readiness status
  /rk/v1/viper/dump:
    get:
      operationId: "32000"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.viperResp'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rk.viperError'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Dump viper config values
      tags:
      - viper
  /rk/v1/viper/set:
    post:
      operationId: "32001"
      parameters:
      - description: viperReq
        in: body
        name: viperReq
        required: true
        schema:
          $ref: '#/definitions/rk.viperReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.viperResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/rk.viperError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rk.viperError'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Set viper config values
      tags:
      - viper
  /rk/v1/zap/level:
    get:
      operationId: "30000"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.zapLevelResp'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rk.zapErrorResp'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Get zap logger level
      tags:
      - zap
    put:
      consumes:
      - application/x-www-form-urlencoded
      operationId: "30001"
      parameters:
      - description: level
        enum:
        - debug
        - info
        - warn
        - error
        - dPanic
        - panic
        - fatal
        in: query
        name: enumstring
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rk.zapLevelResp'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rk.zapErrorResp'
      security:
      - ApiKeyAuth: []
      - BasicAuth: []
      - JWT: []
      summary: Set zap logger level
      tags:
      - zap
schemes:
- http
- https
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: X-API-Key
    type: apiKey
  BasicAuth:
    type: basic
  JWT:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
